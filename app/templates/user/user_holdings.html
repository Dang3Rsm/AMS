{% extends "user/user_dashboardLayout.html" %}

{% block content %}
    <h1 class="mt-3">Holdings</h1>

    <!-- Stocks Section -->
    <h2 class="mt-4">Stocks</h2>
    <div class="table-responsive mt-3">
        <table class="table table-striped {% if user_.darkMode == 1 %}table-dark{% endif %}">
            <thead>
                <tr>
                    <th scope="col">Exchange</th>
                    <th scope="col">Symbol</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Average Price</th>
                    <th scope="col">Current Price</th>
                    <th scope="col">P/L</th>
                    <th scope="col">% Change</th>
                </tr>
            </thead>
            <tbody>
                {% for holding in holdings.stocks %}
                    <tr>
                        <td>NASDAQ</td>
                        <td>{{ holding.symbol }}</td>
                        <td>{{ holding.quantity }}</td>
                        <td>{{ holding.average_price }}</td>
                        <td>{{ holding.current_price }}</td>
                        <td class="{% if holding.pnl > 0 %}text-success{% else %}text-danger{% endif %}">
                            {{ holding.pnl }}%
                        </td>
                        <td class="{% if holding.change > 0 %}text-success{% else %}text-danger{% endif %}">
                            {{ holding.change }}%
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="4" class="text-center">No stocks held.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Mutual Funds Section -->
    <h2 class="mt-4">Mutual Funds</h2>
    <div class="table-responsive mt-3">
        <table class="table table-striped {% if user_.darkMode == 1 %}table-dark{% endif %}">
            <thead>
                <tr>
                    <th scope="col">Fund Name</th>
                    <th scope="col">Theme</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Average Price</th>
                    <th scope="col">Current Price</th>
                    <th scope="col">P/L</th>
                    <th scope="col">% Change</th>
                </tr>
            </thead>
            <tbody>
                {% for holding in holdings.mutualFunds %}
                    <tr>
                        <td>{{ holding.fund_name }}</td>
                        <td>{{ holding.fund_theme }}</td>
                        <td>{{ holding.quantity }}</td>
                        <td>{{ holding.average_price }}</td>
                        <td>{{ holding.current_price }}</td>
                        <td class="{% if holding.pnl > 0 %}text-success{% else %}text-danger{% endif %}">
                            {{ holding.pnl }}%
                        </td>
                        <td class="{% if holding.change > 0 %}text-success{% else %}text-danger{% endif %}">
                            {{ holding.change }}%
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="3" class="text-center">No mutual funds held.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
